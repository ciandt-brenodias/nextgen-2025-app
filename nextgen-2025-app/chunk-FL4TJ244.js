import{C as M,N as F,Q as N,R as j,U as W,V as S,W as B,X as V,Y as z,Z as L,_ as G,ba as Q,r as A,t as P,w as D,x as E,y as O,z as R}from"./chunk-PZN5S6BE.js";import{Ab as y,Eb as k,Fc as T,Gb as x,Hb as p,Hc as u,Rb as I,Wa as d,Xa as n,ba as a,d as C,ka as f,la as s,lb as v,pb as l,sa as _,ta as h,yb as c,zb as m}from"./chunk-OSECSOUH.js";var U=(()=>{class r{static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275mod=s({type:r})}static{this.\u0275inj=a({imports:[u,F]})}}return r})();function $(r,Y){r&1&&(c(0,"div",3),y(1,"app-spinner"),m())}function q(r,Y){if(r&1){let i=k();c(0,"div",4)(1,"p",5),I(2,"Mentorias"),m(),c(3,"app-table",6),x("firstAction",function(e){_(i);let o=p();return h(o.onFirstAction(e))})("secondAction",function(e){_(i);let o=p();return h(o.onSecondAction(e))}),m()()}if(r&2){let i=p();d(3),l("dataSource",i.dataSource)("displayedColumns",i.displayedColumns)("enableFilter",!0)("enableAction1",i.userType=="aluno")("enableAction2",i.userType=="professor")}}var w=(()=>{class r{constructor(i,t,e,o,g){this.alunoService=i,this.professorService=t,this.dialog=e,this.activatedRoute=o,this.sessionService=g,this.elementData=[],this.userType="aluno",this.dataSource=new S(this.elementData)}ngOnInit(){return C(this,null,function*(){this.userType=this.activatedRoute.snapshot.params.perfil,this.userId=this.activatedRoute.snapshot.params.user_id;let i=this.sessionService.getAccessToken();if(this.userType==="aluno"){let t=yield this.alunoService.getMentoriasFromAlunosById(this.userId,i).toPromise();this.displayedColumns=["professor","mentoria"],this.elementData=t.body.map(e=>({id:e.id,mentoria:e.mentoria,professor:e.professor,sessoes:e.sessoes,descricao:e.descricao,dataInicio:e.dataInicio,dataFim:e.dataFim}))}else{let t=yield this.professorService.getMentoriasFromProfessorById(this.userId,i).toPromise();this.displayedColumns=["aluno","mentoria"],this.elementData=t.body.map(e=>({id:e.id,mentoria:e.mentoria,aluno:e.aluno,sessoes:e.sessoes}))}this.dataSource=new S(this.elementData)})}onFirstAction(i){this.dialog.open(z,{width:"800px",data:{mentoria:i}})}onSecondAction(i){this.openDialog=this.dialog.open(L,{width:"800px",data:{mentoria:i}}),this.openDialog.afterClosed().subscribe(t=>{let e=this.elementData.find(o=>o.id===t.mentoria.id);if(e){let o=e.sessoes.find(g=>g.sessaoId===t.feedbackNovo.id);o&&(o.feedback=t.feedbackNovo.feedback)}this.openDialog=null})}static{this.\u0275fac=function(t){return new(t||r)(n(E),n(D),n(V),n(R),n(P))}}static{this.\u0275cmp=f({type:r,selectors:[["app-mentorias"]],decls:3,vars:2,consts:[[1,"flex","w-full","flex-col","h-fit","justify-center","items-center"],["class","flex justify-center items-center",4,"ngIf"],["class","w-full px-8 mt-4 lg:px-32 lg:mt-8",4,"ngIf"],[1,"flex","justify-center","items-center"],[1,"w-full","px-8","mt-4","lg:px-32","lg:mt-8"],[1,"text-2xl","font-medium"],[1,"",3,"firstAction","secondAction","dataSource","displayedColumns","enableFilter","enableAction1","enableAction2"]],template:function(t,e){t&1&&(c(0,"section",0),v(1,$,2,0,"div",1)(2,q,4,5,"div",2),m()),t&2&&(d(),l("ngIf",(e.dataSource==null||e.dataSource.data==null?null:e.dataSource.data.length)==0),d(),l("ngIf",(e.dataSource==null||e.dataSource.data==null?null:e.dataSource.data.length)!=0))},dependencies:[T,G,B],styles:["@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}[_nghost-%COMP%]{height:100%!important;display:flex}"]})}}return r})();var K=[{path:"**",redirectTo:""},{path:"",component:w},{path:"mentorias",component:w}],H=(()=>{class r{static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275mod=s({type:r})}static{this.\u0275inj=a({imports:[M.forChild(K),M]})}}return r})();var Ge=(()=>{class r{static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275mod=s({type:r})}static{this.\u0275inj=a({imports:[u,O,H,Q,U,N,W,j,A]})}}return r})();export{Ge as a};
