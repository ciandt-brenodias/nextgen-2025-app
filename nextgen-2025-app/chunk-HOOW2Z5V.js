import{B as K,C as L,ba as Q,g as w,h as p,i as A,j as E,k as P,l as N,m as M,n as I,o as D,p as T,q as B,r as W,s as z,v as j,y as H}from"./chunk-PZN5S6BE.js";import{Aa as y,Ab as u,Dc as S,Eb as G,Fc as F,Gb as m,Hb as h,Hc as J,Rb as s,Sb as $,W as x,Wa as l,Xa as c,Xb as O,ba as C,j as b,ka as d,la as v,lb as _,pb as a,sa as q,ta as U,yb as n,zb as r}from"./chunk-OSECSOUH.js";var k=class{static parseJwt(g){try{let t=g.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(atob(t).split("").map(function(f){return"%"+("00"+f.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(i)}catch(o){return console.error("Invalid JWT token",o),null}}};var oe=e=>({"bg-gray-300 hover:bg-gray-300":e});function ne(e,g){e&1&&u(0,"span",11)}function re(e,g){e&1&&(n(0,"span"),s(1,"entrar"),r())}var X=(()=>{class e{constructor(o,t,i){this.fb=o,this.authService=t,this.router=i,this.ngUnsubscribe$=new b,this.toggleForm=new y,this.loading=!1}ngOnInit(){this.createForm()}ngOnDestroy(){this.ngUnsubscribe$.next(!0),this.ngUnsubscribe$.complete()}onSubmit(){if(this.loading=!0,this.signinForm.valid){let o=this.signinForm.value;this.authService.signin(o).pipe(x(this.ngUnsubscribe$)).subscribe({next:t=>{this.authService.storeSessionData(t.access_token);let i=k.parseJwt(t.access_token);this.router.navigate(["/mentorias",{perfil:i.perfil,user_id:i.id}])},error:t=>{console.error(t)},complete:()=>{this.loading=!1}})}}createForm(){this.signinForm=this.fb.group({email:["",[p.required,p.email]],password:["",p.required]})}static{this.\u0275fac=function(t){return new(t||e)(c(B),c(j),c(K))}}static{this.\u0275cmp=d({type:e,selectors:[["app-signin"]],outputs:{toggleForm:"toggleForm"},decls:15,vars:7,consts:[[1,"flex","flex-col","items-center","bg-white","p-6","rounded-lg","shadow-md","w-96"],[1,"text-xl","font-medium","mb-4","text-[#FA5A50]"],[1,"flex","flex-col","w-full","gap-y-4",3,"ngSubmit","formGroup"],["for","email",1,"mt-2","sr-only"],["id","email","type","email","formControlName","email","placeholder","email","required","",1,"p-2","border","border-gray-300","rounded"],["for","password",1,"mt-2","sr-only"],["id","password","type","password","formControlName","password","placeholder","senha","required","",1,"p-2","border","border-gray-300","rounded"],["type","submit",1,"mt-4","bg-[#A63832]","text-white","p-2","rounded","hover:bg-[#D94A41]","transition",3,"disabled","ngClass"],["class","inline-block h-5 w-5 mr-3 animate-spin text-primary-500 rounded-full border-4 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]",4,"ngIf"],[4,"ngIf"],["type","button",1,"mt-4","text-blue-500",3,"click"],[1,"inline-block","h-5","w-5","mr-3","animate-spin","text-primary-500","rounded-full","border-4","border-solid","border-current","border-r-transparent","align-[-0.125em]","motion-reduce:animate-[spin_1.5s_linear_infinite]"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"h3",1),s(2,"Entrar"),r(),n(3,"form",2),m("ngSubmit",function(){return i.onSubmit()}),n(4,"label",3),s(5,"email:"),r(),u(6,"input",4),n(7,"label",5),s(8,"senha:"),r(),u(9,"input",6),n(10,"button",7),_(11,ne,1,0,"span",8)(12,re,2,0,"span",9),r(),n(13,"button",10),m("click",function(){return i.toggleForm.emit()}),s(14,"N\xE3o possu\xED uma conta ainda? Cadastre-se"),r()()()),t&2&&(l(3),a("formGroup",i.signinForm),l(7),a("disabled",i.loading||i.signinForm.invalid)("ngClass",O(5,oe,i.loading||i.signinForm.invalid)),l(),a("ngIf",i.loading),l(),a("ngIf",!i.loading))},dependencies:[S,F,M,w,A,E,T,I,D],encapsulation:2})}}return e})();var Y=(()=>{class e{constructor(o){this.authService=o,this.toggleForm=new y,this.ngUnsubscribe$=new b,this.errMsg="",this.loading=!1,this.stateType="nao-logado",this.createForm()}ngOnDestroy(){this.ngUnsubscribe$.next(!0),this.ngUnsubscribe$.complete()}onSignup(){if(this.signupForm.valid){let o=this.signupForm.value;this.authService.signup(o).pipe(x(this.ngUnsubscribe$)).subscribe({next:t=>console.log(t),error:t=>{console.error(t),this.errMsg=t.error.message,this.loading=!1},complete:()=>{this.toggleForm.emit(),this.loading=!1}})}else this.errMsg="Please fill in all fields correctly"}createForm(){this.signupForm=new P({fullname:new N(null,[p.required]),email:new N(null,[p.required,p.email]),password:new N(null,[p.required])})}onSubmit(){this.signupForm.valid&&console.log(this.signupForm.value)}static{this.\u0275fac=function(t){return new(t||e)(c(j))}}static{this.\u0275cmp=d({type:e,selectors:[["app-signup"]],outputs:{toggleForm:"toggleForm"},decls:17,vars:1,consts:[[1,"flex","flex-col","items-center","bg-white","p-6","rounded-lg","shadow-md","w-96"],[1,"text-xl","font-medium","mb-4","text-[#FA5A50]"],[1,"flex","flex-col","w-full","gap-y-4",3,"ngSubmit","formGroup"],["for","document",1,"mt-2","sr-only"],["id","document","formControlName","document","placeholder","documento","required","",1,"p-2","border","border-gray-300","rounded"],["for","email",1,"mt-2","sr-only"],["id","email","type","email","formControlName","email","placeholder","email","required","",1,"p-2","border","border-gray-300","rounded"],["for","password",1,"mt-2","sr-only"],["id","password","type","password","formControlName","password","placeholder","senha","required","",1,"p-2","border","border-gray-300","rounded"],["type","submit",1,"mt-4","bg-[#A63832]","text-white","p-2","rounded","hover:bg-[#D94A41]","transition"],["type","button",1,"mt-2","text-blue-500",3,"click"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"h3",1),s(2,"Cadastre-se"),r(),n(3,"form",2),m("ngSubmit",function(){return i.onSubmit()}),n(4,"label",3),s(5,"Document:"),r(),u(6,"input",4),n(7,"label",5),s(8,"Email:"),r(),u(9,"input",6),n(10,"label",7),s(11,"Senha:"),r(),u(12,"input",8),n(13,"button",9),s(14,"Cadastra-se"),r(),n(15,"button",10),m("click",function(){return i.toggleForm.emit()}),s(16,"Ja possui uma conta? Faca seu login!"),r()()()),t&2&&(l(3),a("formGroup",i.signupForm))},dependencies:[M,w,A,E,T,I,D]})}}return e})();function le(e,g){if(e&1){let o=G();n(0,"div",9)(1,"app-signin",10),m("toggleForm",function(){q(o);let i=h();return U(i.toggleForm())}),r()()}if(e&2){let o=h();a("ngClass",o.showLogin?"opacity-100":"opacity-0")}}function me(e,g){if(e&1){let o=G();n(0,"div",9)(1,"app-signup",10),m("toggleForm",function(){q(o);let i=h();return U(i.toggleForm())}),r()()}if(e&2){let o=h();a("ngClass",o.showLogin?"opacity-0":"opacity-100")}}var R=(()=>{class e{constructor(){this.showLogin=!0}toggleForm(){this.showLogin=!this.showLogin}get dynamicText(){return this.showLogin?"Fa\xE7a seu login para acessar cada perfil!":"Cadastre-se agora para aproveitar o melhor da plataforma!"}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=d({type:e,selectors:[["app-auth"]],decls:13,vars:3,consts:[[1,"max-h-full"],[1,"flex","bg-white","border","border-b-4","border-b-[#FA5A50]","text-[#FA5A50]","text-left","items-center","lg:px-16","px-10","py-4","lg:h-32"],[1,"text-md","lg:text-3xl","font-medium"],[1,"flex","flex-col","lg:flex-row","h-1/2","lg:px-16","px-10","py-6","lg:mt-16"],[1,"flex-1","lg:flex","flex-col","items-start","hidden"],[1,"text-md","lg:text-2xl","font-medium"],[1,"text-xs","lg:text-lg","mt-2"],[1,"flex-1","flex","items-center","lg:justify-end","justify-center"],["class","transition-opacity duration-300 ease-in-out",3,"ngClass",4,"ngIf"],[1,"transition-opacity","duration-300","ease-in-out",3,"ngClass"],[3,"toggleForm"]],template:function(t,i){t&1&&(n(0,"section",0)(1,"div",1)(2,"h1",2),s(3,"Conecte-se com as mentorias que importam!"),r()(),n(4,"div",3)(5,"div",4)(6,"h2",5),s(7,"Nunca foi t\xE3o f\xE1cil se conectar com mentorias! "),r(),n(8,"p",6),s(9),r()(),n(10,"div",7),_(11,le,2,1,"div",8)(12,me,2,1,"div",8),r()()()),t&2&&(l(9),$(i.dynamicText),l(2),a("ngIf",i.showLogin),l(),a("ngIf",!i.showLogin))},dependencies:[S,F,X,Y],encapsulation:2})}}return e})();var pe=[{path:"",component:R},{path:"login",component:R,data:{state:"login"}}],Z=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=v({type:e})}static{this.\u0275inj=C({imports:[L.forChild(pe),L]})}}return e})();var Le=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=v({type:e})}static{this.\u0275inj=C({imports:[J,H,Z,W,z,Q]})}}return e})();export{Le as AuthModule};
